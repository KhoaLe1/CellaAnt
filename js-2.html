<!doctype html><html>
<head>
<title>This is an HTML canvas</title>
<link rel="stylesheet" href="../assets/styles.css">
</head>
<body><h1>Playing the HTML canvas</h1>
<h4>Time-stamp: <2019-01-21 20:11:03 Chuck Siska></h4>

</body>
<script src="../assets/draw-stuff.js"></script>
<script>
var rn = 0
//var sane = 0;
var canvas = document.createElement('canvas');
canvas.id = 'globalCanvas';
document.body.appendChild(canvas);

langtonant({}, {
 pixlsize: 10,
 interval: 5
});
function langtonant(antx, optx) {

	var x, y, i;

	// extend default opts
	var opts = {
		gridsize: 90,
		pixlsize: 6,
		interval: 5
	};
	for (i in optx) {
		opts[i] = optx[i];
	}

	// extend default ants
	var ants = [{
		x: 20,
		y: 20,
		d: 0
	}];
	for (i in antx) {
		ants[i] = antx[i];
	}

	// initialise grid
	var grid = [];
	for (x = 0; x <= 410; x ++) {
		grid[x] = [];
		for (y = 0; y <= 410; y ++) {
			grid[x][y] = true;
		}
	}

	// initialise directions
	var dirs = [
		{x: 1, y: 0},
		{x: 0, y: -1},
		{x: -1, y: 0},
		{x: 0, y: 1}
	];

	// initialise canvas
	var canv = document.getElementById('globalCanvas');
	var cont = canv.getContext('2d');

	canv.width = 410;  //width = 410 = 82(gridsize) * 5(pixelsize)
	canv.height = 410; //height = 410 = 82(gridside) *(pixelsize)

  draw_grid( cont, 10, 50, 'white', 'yellow' );
	// initialise pixels
	var pixlblac = cont.createImageData(opts.pixlsize,opts.pixlsize);
	for (i = 0; i < pixlblac.data.length; i+= 1) {
    // i = 0; i < (125) ; i+=4
    pixlblac.data[i+0] = 0;
    pixlblac.data[i+1] = 0;
    pixlblac.data[i+2] = 0;
		//pixlblac.data[i+3] = 255; // data[3] = 255, data[6]
	}

	var pixlblue = cont.createImageData(opts.pixlsize,opts.pixlsize);
	for (i = 0; i < pixlblue.data.length; i+=1) {
    pixlblue.data[i+0] = 0;
    pixlblue.data[i+1] = 0;
    pixlblue.data[i+2] = 255;
		//pixlwhit.data[i+3] = 0;
	}

	var pixlred = cont.createImageData(opts.pixlsize, opts.pixlsize);
	for(i = 0; i < pixlred.data.length; i+=1){
		pixlred.data[i+0] = 255;
		pixlred.data[i+0] = 0;
		pixlred.data[i+0] = 0;
	}

	var pixlyellow = cont.createImageData(opts.pixlsize, opts.pixlsize);
	for(i = 0; i < pixlyellow.data.length; i+=1){
		pixlyellow.data[i+0] = 255;
		pixlyellow.data[i+0] = 255;
		pixlyellow.data[i+0] = 0;
	}

	// run simulation
	function simulate() {
	
    rn++;
    var sane = true;
		// iterate over ants
		for (i = 0; i < ants.length; i ++) {
			var n = ants[i];

			// invert, draw, turn
			if (grid[n.x][n.y] == pixlblack) { // if position is at grid[40][40], black pixel
				grid[n.x][n.y] = pixlred;
				cont.putImageData(pixlblac, (n.x * 10) , (n.y * 10));
				n.d++;
			}else if(grid[n.x][n.y] == pixlred){
				grid[n.x][n.y] = pixlyellow;
				cont.putImageData(pixlred, (n.x * 10) , (n.y * 10));
				n.d++;
			}else if(grid[n.x][n.y] == pixlyellow){
				grid[n.x][n.y] = pixlblue;
				cont.putImageData(pixlyellow, (n.x * 10) , (n.y * 10));
				n.d--;
			}else if(grid[n.x][n.y] == pixlblue){
				grid[n.x][n.y] = pixlblack;
				cont.putImageData(pixlblue, (n.x * 10) , (n.y * 10));
				n.d--;
			}

			// modulus wraparound
			n.d += dirs.length;
			n.d %= dirs.length;

			// position + direction
			n.x += dirs[n.d].x; // x += dirs[1].x
      n.x -= dirs[n.d].x;
			//n.y += dirs[n.d].y; // y += dits[1].y

			// sanity check
			if (rn == 1)
      			sane = false;
      		else sane = true;
		}

		// loop with interval
    //sane++;
		if (sane == true) {
			setTimeout(simulate, opts.interval);
		}
	}

	simulate();
}



</script>
</html>
